<?php if(!function_exists('prevent_direct')) include $system['location_php'] . '/lib/prevent-direct.php'; prevent_direct('index.min.php'); if(!isset($_GET['icons'])) { prevent_index(); exit(); } if(!isset($_GET['root'])) { prevent_index(); exit(); } $session_regenerate=false; include $system['location_php'] . '/lib/login/login.php'; unset($session_regenerate); /* _webadmin */ ?>
<?php
	/* _webadmin *//*
	if((!isset($_GET['icons'])) || (!isset($_GET['root'])) || (basename($_SERVER['SCRIPT_NAME']) === 'index.min.php')) exit();
	*//* _webadmin */
	$_SESSION['wicd_csrfToken']=substr(base_convert(sha1(uniqid(mt_rand())), 16, 36), 0, 32); header('Content-type: text/javascript; charset: UTF-8'); header('Cache-Control: no-store, no-cache, must-revalidate'); header('Pragma: no-cache'); // because token is regenerated
?>
var wicd_root="<?php echo $_GET['root']; ?>",wicd_icons="<?php echo $_GET['icons']; ?>",wicd_csrfToken="&wicd_csrfToken=<?php echo $_SESSION['wicd_csrfToken']; ?>",wicd_startFlag=!0;function wicd_defineEvents(){$(".wicd_closeWindow").click(function(){$(this).parent().parent().hide()}),$("#wicd_settingsApply").click(function(){var t=$("#wicd_settingsWirelessInterface").val();$.get(wicd_root+"/api?wicd=setWifiDevice&device="+t+wicd_csrfToken,function(t){}),$("#wicd_settings").hide(),$("#wicd_settingsSaved").show(),setTimeout(function(){$("#wicd_settingsSaved").hide()},1e3)}),$("#wicd_settingsCancel").click(function(){$("#wicd_settings").hide()}),$("#wicd_closeEnterPassword").click(function(){delete wicd_addNetworkName,$("#wicd_enterPassword").hide()}),$("#wicd_saveNetwork").click(function(){var t=$("#wicd_enterPasswordText").val();""!=t&&($.get(wicd_root+"/api?wicd=saveNetwork&networkName="+wicd_addNetworkName+"&networkPassword="+t+wicd_csrfToken,function(t){}),$("#wicd_enterPasswordText").val(""),delete wicd_addNetworkName,$("#wicd_enterPassword").hide(),$("#wicd_networkSaved").show(),setTimeout(function(){$("#wicd_networkSaved").hide()},1e3),wicd_getConnectionStatus(),wicd_getNetworkList())}),$("#wicd_saveNetworkCancel").click(function(){$("#wicd_enterPasswordText").val(""),delete wicd_addNetworkName,$("#wicd_enterPassword").hide()}),$("#wicd_refresh").click(function(){wicd_getConnectionStatus(),wicd_getNetworkList()}),$("#wicd_disconnect").click(function(){$.get(wicd_root+"/api?wicd=disconnect"+wicd_csrfToken,function(t){})}),$("#wicd_showSettings").click(function(){$.get(wicd_root+"/api?wicd=getWifiDevice"+wicd_csrfToken,function(t){$("#wicd_settingsWirelessInterface").val(t)}),$("#wicd_settings").show()}),$("#wicd_showAbout").click(function(){$("#wicd_about").show()}),$(".wicd_addNetwork").click(function(){$("#wicd_enterPassword").show(),$("#wicd_enterPasswordText").focus()}),$(".wicd_connectToNetwork").click(function(){$.get(wicd_root+"/api?wicd=connect&network="+wicd_connectToNetworkName+wicd_csrfToken,function(t){wicd_getNetworkList()})}),$(".wicd_contentNetworksNetworkAutoconnect").change(function(){var t=$(this).attr("name");this.checked?$.get(wicd_root+"/api?wicd=setAutoconnect&state=true&network="+t+wicd_csrfToken,function(t){}):$.get(wicd_root+"/api?wicd=setAutoconnect&state=false&network="+t+wicd_csrfToken,function(t){})})}function wicd_getNetworkList(){$("#wicd_contentNetworks").html('<div id="wicd_contentNetworksActiontext">Searching...</div>'),$.get(wicd_root+"/api?wicd=checkWifiDevice"+wicd_csrfToken,function(t){"true"==t?$.getJSON(wicd_root+"/api?wicd=getNetworkList"+wicd_csrfToken,function(t){var c;""==t?$("#wicd_contentNetworks").html('<div id="wicd_contentNetworksActiontext">No networks available</div>'):(c="",$(t).each(function(t,e){autoconnectCheckbox="true"==e.saved?(outputButton='<input type="button" class="wicd_connectToNetwork button" name="'+e.name+'" value="Connect" onclick="javascript:wicd_connectToNetworkName=\''+e.name+"'\">","true"==e.autoconnect?'<input type="checkbox" name="'+e.mac+'" class="wicd_contentNetworksNetworkAutoconnect" checked>Autoconnect<br>':'<input type="checkbox" name="'+e.mac+'" class="wicd_contentNetworksNetworkAutoconnect">Autoconnect<br>'):(outputButton='<input type="button" class="wicd_addNetwork button" name="'+e.name+'" value="Add" onclick="javascript:wicd_addNetworkName=\''+e.name+"'\">","<br>"),c=c+'<div class="wicd_contentNetworksNetwork">\t\t\t\t\t\t\t\t\t<span class="wicd_contentNetworksNetworkName">'+e.name+'</span><br>\t\t\t\t\t\t\t\t\t<div class="wicd_contentNetworksNetworkSignalicon">\t\t\t\t\t\t\t\t\t\t<br>\t\t\t\t\t\t\t\t\t\t<img src="'+wicd_icons+"/"+e.qualityImg+'" alt="quality" class="wicd_contentNetworksNetworkSignaliconQualityImg">\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t<div class="wicd_contentNetworksNetworkDetails">'+e.mac+" "+e.encryption+" Channel "+e.channel+"<br>"+autoconnectCheckbox+outputButton+"</div>\t\t\t\t\t\t\t\t</div>"}),$("#wicd_contentNetworks").html(c)),wicd_defineEvents()}).fail(function(){$("#wicd_contentNetworks").html('<div id="wicd_contentNetworksActiontext">Server connection error</div>')}):($("#wicd_contentNetworks").html('<div id="wicd_contentNetworksActiontext">Wifi device not connected</div>'),wicd_defineEvents())})}function wicd_getConnectionStatus(){$("#wicd_status").load(wicd_root+"/api?wicd=getConnectionStatus"+wicd_csrfToken)}window.jQuery&&$(document).ready(function(){wicd_startFlag?(wicd_defineEvents(),wicd_getConnectionStatus(),wicd_getNetworkList()):wicd_defineEvents()});